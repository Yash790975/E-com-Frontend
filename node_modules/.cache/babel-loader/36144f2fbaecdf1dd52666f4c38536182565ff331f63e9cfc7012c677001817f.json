{"ast":null,"code":"import _objectSpread from\"Y:/MY/Certificate/E-COM/E_Commerce/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from'react';import{Link,useNavigate}from'react-router-dom';import{Footer,Navbar}from\"../components\";import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const Register=()=>{const[formData,setFormData]=useState({name:'',email:'',password:''});const[error,setError]=useState('');const[loading,setLoading]=useState(false);const[showModal,setShowModal]=useState(false);const navigate=useNavigate();const{name,email,password}=formData;const onChange=e=>setFormData(_objectSpread(_objectSpread({},formData),{},{[e.target.name]:e.target.value}));const onSubmit=async e=>{e.preventDefault();setError('');setLoading(true);try{// Basic validation\nif(password.length<6){throw new Error('Password must be at least 6 characters long');}const config={headers:{'Content-Type':'application/json'}};const body=JSON.stringify({name,email,password});// const apiUrl = process.env.REACT_APP_API_URL || 'http://localhost:5000';\nconst apiUrl=process.env.REACT_APP_API_URL||'https://e-com-fpj2.onrender.com';const res=await axios.post(\"\".concat(apiUrl,\"/api/register\"),body,config);// Save token to localStorage\nlocalStorage.setItem('token',res.data.token);localStorage.setItem('user',JSON.stringify(res.data.user));setLoading(false);// Show success modal instead of immediately redirecting\nsetShowModal(true);// Redirect after 2 seconds\nsetTimeout(()=>{navigate('/');},2000);}catch(err){if(err.message){setError(err.message);}else{var _err$response,_err$response$data;setError(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||'Registration failed. Please enter correct credentials.');}setLoading(false);}};// Function to close modal manually\nconst closeModal=()=>{setShowModal(false);navigate('/');};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"container my-3 py-3\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-center\",children:\"Register\"}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"row my-4 h-100\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-4 col-lg-4 col-sm-8 mx-auto\",children:[error&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger\",children:error}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:onSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form my-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"name\",children:\"Full Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"name\",name:\"name\",value:name,onChange:onChange,placeholder:\"Enter Your Name\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form my-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Email address\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"form-control\",id:\"email\",name:\"email\",value:email,onChange:onChange,placeholder:\"name@example.com\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form my-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",id:\"password\",name:\"password\",value:password,onChange:onChange,placeholder:\"Password\",required:true,minLength:\"6\"}),/*#__PURE__*/_jsx(\"small\",{className:\"form-text text-muted\",children:\"Password must be at least 6 characters long\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"my-3\",children:/*#__PURE__*/_jsxs(\"p\",{children:[\"Already has an account? \",/*#__PURE__*/_jsx(Link,{to:\"/login\",className:\"text-decoration-underline text-info\",children:\"Login\"}),\" \"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center\",children:/*#__PURE__*/_jsx(\"button\",{className:\"my-2 mx-auto btn btn-dark\",type:\"submit\",disabled:loading,children:loading?'Registering...':'Register'})})]})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"modal fade \".concat(showModal?'show':''),style:{display:showModal?'block':'none'},tabIndex:\"-1\",role:\"dialog\",children:/*#__PURE__*/_jsx(\"div\",{className:\"modal-dialog modal-dialog-centered\",role:\"document\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"modal-title\",children:\"Registration Successful!\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-close\",onClick:closeModal,\"aria-label\":\"Close\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"modal-body\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Your account has been created successfully. You will be redirected to the homepage.\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"modal-footer\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-success\",onClick:closeModal,children:\"Continue\"})})]})})}),showModal&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-backdrop fade show\"}),/*#__PURE__*/_jsx(Footer,{})]});};export default Register;","map":{"version":3,"names":["React","useState","Link","useNavigate","Footer","Navbar","axios","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Register","formData","setFormData","name","email","password","error","setError","loading","setLoading","showModal","setShowModal","navigate","onChange","e","_objectSpread","target","value","onSubmit","preventDefault","length","Error","config","headers","body","JSON","stringify","apiUrl","process","env","REACT_APP_API_URL","res","post","concat","localStorage","setItem","data","token","user","setTimeout","err","message","_err$response","_err$response$data","response","closeModal","children","className","htmlFor","type","id","placeholder","required","minLength","to","disabled","style","display","tabIndex","role","onClick"],"sources":["Y:/MY/Certificate/E-COM/E_Commerce/src/pages/Register.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { Footer, Navbar } from \"../components\";\nimport axios from 'axios';\n\nconst Register = () => {\n    const [formData, setFormData] = useState({\n        name: '',\n        email: '',\n        password: ''\n    });\n    const [error, setError] = useState('');\n    const [loading, setLoading] = useState(false);\n    const [showModal, setShowModal] = useState(false);\n    const navigate = useNavigate();\n    \n    const { name, email, password } = formData;\n    \n    const onChange = e => setFormData({ ...formData, [e.target.name]: e.target.value });\n    \n    const onSubmit = async e => {\n        e.preventDefault();\n        setError('');\n        setLoading(true);\n        \n        try {\n            // Basic validation\n            if (password.length < 6) {\n                throw new Error('Password must be at least 6 characters long');\n            }\n            \n            const config = {\n                headers: {\n                    'Content-Type': 'application/json'\n                }\n            };\n            \n            const body = JSON.stringify({ name, email, password });\n            // const apiUrl = process.env.REACT_APP_API_URL || 'http://localhost:5000';\n            const apiUrl = process.env.REACT_APP_API_URL || 'https://e-com-fpj2.onrender.com';\n            \n            const res = await axios.post(`${apiUrl}/api/register`, body, config);\n            \n            // Save token to localStorage\n            localStorage.setItem('token', res.data.token);\n            localStorage.setItem('user', JSON.stringify(res.data.user));\n            \n            setLoading(false);\n            \n            // Show success modal instead of immediately redirecting\n            setShowModal(true);\n            \n            // Redirect after 2 seconds\n            setTimeout(() => {\n                navigate('/');\n            }, 2000);\n        } catch (err) {\n            if (err.message) {\n                setError(err.message);\n            } else {\n                setError(err.response?.data?.message || 'Registration failed. Please enter correct credentials.');\n            }\n            setLoading(false);\n        }\n    };\n    \n    // Function to close modal manually\n    const closeModal = () => {\n        setShowModal(false);\n        navigate('/');\n    };\n    \n    return (\n        <>\n            <Navbar />\n            <div className=\"container my-3 py-3\">\n                <h1 className=\"text-center\">Register</h1>\n                <hr />\n                <div className=\"row my-4 h-100\">\n                    <div className=\"col-md-4 col-lg-4 col-sm-8 mx-auto\">\n                        {error && <div className=\"alert alert-danger\">{error}</div>}\n                        <form onSubmit={onSubmit}>\n                            <div className=\"form my-3\">\n                                <label htmlFor=\"name\">Full Name</label>\n                                <input\n                                    type=\"text\"\n                                    className=\"form-control\"\n                                    id=\"name\"\n                                    name=\"name\"\n                                    value={name}\n                                    onChange={onChange}\n                                    placeholder=\"Enter Your Name\"\n                                    required\n                                />\n                            </div>\n                            <div className=\"form my-3\">\n                                <label htmlFor=\"email\">Email address</label>\n                                <input\n                                    type=\"email\"\n                                    className=\"form-control\"\n                                    id=\"email\"\n                                    name=\"email\"\n                                    value={email}\n                                    onChange={onChange}\n                                    placeholder=\"name@example.com\"\n                                    required\n                                />\n                            </div>\n                            <div className=\"form my-3\">\n                                <label htmlFor=\"password\">Password</label>\n                                <input\n                                    type=\"password\"\n                                    className=\"form-control\"\n                                    id=\"password\"\n                                    name=\"password\"\n                                    value={password}\n                                    onChange={onChange}\n                                    placeholder=\"Password\"\n                                    required\n                                    minLength=\"6\"\n                                />\n                                <small className=\"form-text text-muted\">Password must be at least 6 characters long</small>\n                            </div>\n                            <div className=\"my-3\">\n                                <p>Already has an account? <Link to=\"/login\" className=\"text-decoration-underline text-info\">Login</Link> </p>\n                            </div>\n                            <div className=\"text-center\">\n                                <button className=\"my-2 mx-auto btn btn-dark\" type=\"submit\" disabled={loading}>\n                                    {loading ? 'Registering...' : 'Register'}\n                                </button>\n                            </div>\n                        </form>\n                    </div>\n                </div>\n            </div>\n            \n            {/* Success Modal */}\n            <div className={`modal fade ${showModal ? 'show' : ''}`} \n                 style={{ display: showModal ? 'block' : 'none' }} \n                 tabIndex=\"-1\" \n                 role=\"dialog\">\n                <div className=\"modal-dialog modal-dialog-centered\" role=\"document\">\n                    <div className=\"modal-content\">\n                        <div className=\"modal-header\">\n                            <h5 className=\"modal-title\">Registration Successful!</h5>\n                            <button type=\"button\" className=\"btn-close\" onClick={closeModal} aria-label=\"Close\"></button>\n                        </div>\n                        <div className=\"modal-body\">\n                            <p>Your account has been created successfully. You will be redirected to the homepage.</p>\n                        </div>\n                        <div className=\"modal-footer\">\n                            <button type=\"button\" className=\"btn btn-success\" onClick={closeModal}>Continue</button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            \n            {/* Modal Backdrop */}\n            {showModal && <div className=\"modal-backdrop fade show\"></div>}\n            \n            <Footer />\n        </>\n    );\n};\n\nexport default Register;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}