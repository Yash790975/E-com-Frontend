{"ast":null,"code":"import _regeneratorRuntime from\"Y:/MY/Certificate/E-COM/E_Commerce/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"Y:/MY/Certificate/E-COM/E_Commerce/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"Y:/MY/Certificate/E-COM/E_Commerce/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"Y:/MY/Certificate/E-COM/E_Commerce/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"Y:/MY/Certificate/E-COM/E_Commerce/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";// import React, { useState, useEffect } from \"react\";\n// import { Link, useNavigate } from \"react-router-dom\";\n// import { Footer, Navbar } from \"../components\";\n// import axios from \"axios\";\n// import { Modal, Button } from \"react-bootstrap\";\n// const Login = () => {\n//   const [formData, setFormData] = useState({\n//     email: \"\",\n//     password: \"\"\n//   });\n//   const [error, setError] = useState(\"\");\n//   const [loading, setLoading] = useState(false);\n//   const [showSuccessModal, setShowSuccessModal] = useState(false);\n//   const [showErrorModal, setShowErrorModal] = useState(false);\n//   const [errorMessage, setErrorMessage] = useState(\"\");\n//   const [isLoggedIn, setIsLoggedIn] = useState(false);\n//   const [userName, setUserName] = useState(\"\");\n//   const navigate = useNavigate();\n//   const { email, password } = formData;\n//   // Check if user is already logged in\n//   useEffect(() => {\n//     const token = localStorage.getItem(\"token\");\n//     const user = JSON.parse(localStorage.getItem(\"user\") || \"{}\");\n//     if (token && user) {\n//       setIsLoggedIn(true);\n//       setUserName(user.name || user.username || user.email || \"User\");\n//     }\n//   }, []);\n//   const handleLogout = () => {\n//     localStorage.removeItem(\"token\");\n//     localStorage.removeItem(\"user\");\n//     setIsLoggedIn(false);\n//     setUserName(\"\");\n//     // Show a quick logout message\n//     setError(\"You have been logged out successfully.\");\n//     setTimeout(() => setError(\"\"), 3000);\n//   };\n//   const onChange = e => setFormData({ ...formData, [e.target.name]: e.target.value });\n//   // Close modals\n//   const handleCloseSuccessModal = () => {\n//     setShowSuccessModal(false);\n//     navigate(\"/\");\n//   };\n//   const handleCloseErrorModal = () => {\n//     setShowErrorModal(false);\n//   };\n//   const onSubmit = async e => {\n//     e.preventDefault();\n//     setError(\"\");\n//     setLoading(true);\n//     try {\n//       const config = {\n//         headers: {\n//           \"Content-Type\": \"application/json\"\n//         }\n//       };\n//       const body = JSON.stringify({ email, password });\n//       const apiUrl = process.env.REACT_APP_API_URL || \"http://localhost:5000\";\n//       const res = await axios.post(`${apiUrl}/api/login`, body, config);\n//       // Save token and user to localStorage\n//       localStorage.setItem(\"token\", res.data.token);\n//       localStorage.setItem(\"user\", JSON.stringify(res.data.user));\n//       setLoading(false);\n//       // Show success modal instead of immediate redirect\n//       setShowSuccessModal(true);\n//       // Optional: Auto-redirect after success modal display (3 seconds)\n//       // setTimeout(() => {\n//       //   setShowSuccessModal(false);\n//       //   navigate(\"/\");\n//       // }, 3000);\n//     } catch (err) {\n//       const message = err.response?.data?.message || \"Login failed. Please check your credentials.\";\n//       setError(message);\n//       setErrorMessage(message);\n//       setShowErrorModal(true);\n//       setLoading(false);\n//     }\n//   };\n//   return (\n//     <>\n//       <Navbar />\n//       <div className=\"container my-3 py-3\">\n//         <h1 className=\"text-center\">Login</h1>\n//         <hr />\n//         <div className=\"row my-4 h-100\">\n//           <div className=\"col-md-6 col-lg-4 col-sm-8 mx-auto\">\n//             {error && <div className=\"alert alert-danger\">{error}</div>}\n//             {isLoggedIn ? (\n//               <div className=\"card p-4 text-center\">\n//                 <div className=\"card-body\">\n//                   <i className=\"bi bi-person-circle text-primary\" style={{ fontSize: \"3rem\" }}></i>\n//                   <h3 className=\"my-3\">Welcome back, {userName}!</h3>\n//                   <p className=\"mb-4\">You are already logged in.</p>\n//                   <div className=\"d-flex justify-content-center gap-3\">\n//                     <Button variant=\"primary\" onClick={() => navigate(\"/\")}>\n//                       Go to Homepage\n//                     </Button>\n//                     <Button variant=\"outline-danger\" onClick={handleLogout}>\n//                       Logout\n//                     </Button>\n//                   </div>\n//                 </div>\n//               </div>\n//             ) : (\n//               <form onSubmit={onSubmit}>\n//                 <div className=\"my-3\">\n//                   <label htmlFor=\"email\">Email address</label>\n//                   <input\n//                     type=\"email\"\n//                     className=\"form-control\"\n//                     id=\"email\"\n//                     name=\"email\"\n//                     value={email}\n//                     onChange={onChange}\n//                     placeholder=\"name@example.com\"\n//                     required\n//                   />\n//                 </div>\n//                 <div className=\"my-3\">\n//                   <label htmlFor=\"password\">Password</label>\n//                   <input\n//                     type=\"password\"\n//                     className=\"form-control\"\n//                     id=\"password\"\n//                     name=\"password\"\n//                     value={password}\n//                     onChange={onChange}\n//                     placeholder=\"Password\"\n//                     required\n//                   />\n//                 </div>\n//                 <div className=\"my-3\">\n//                   <p>New Here? <Link to=\"/register\" className=\"text-decoration-underline text-info\">Register</Link> </p>\n//                 </div>\n//                 <div className=\"text-center\">\n//                   <button className=\"my-2 mx-auto btn btn-dark\" type=\"submit\" disabled={loading}>\n//                     {loading ? \"Logging in...\" : \"Login\"}\n//                   </button>\n//                 </div>\n//               </form>\n//             )}\n//           </div>\n//         </div>\n//       </div>\n//       <Footer />\n//       {/* Success Modal */}\n//       <Modal show={showSuccessModal} onHide={handleCloseSuccessModal} centered>\n//         <Modal.Header closeButton className=\"bg-success text-white\">\n//           <Modal.Title>Login Successful</Modal.Title>\n//         </Modal.Header>\n//         <Modal.Body>\n//           <div className=\"text-center\">\n//             <i className=\"bi bi-check-circle-fill text-success\" style={{ fontSize: \"3rem\" }}></i>\n//             <p className=\"mt-3\">You have successfully logged in!</p>\n//           </div>\n//         </Modal.Body>\n//         <Modal.Footer>\n//           <Button variant=\"success\" onClick={handleCloseSuccessModal}>\n//             Continue\n//           </Button>\n//         </Modal.Footer>\n//       </Modal>\n//       {/* Error Modal */}\n//       <Modal show={showErrorModal} onHide={handleCloseErrorModal} centered>\n//         <Modal.Header closeButton className=\"bg-danger text-white\">\n//           <Modal.Title>Login Failed</Modal.Title>\n//         </Modal.Header>\n//         <Modal.Body>\n//           <div className=\"text-center\">\n//             <i className=\"bi bi-exclamation-circle-fill text-danger\" style={{ fontSize: \"3rem\" }}></i>\n//             <p className=\"mt-3\">{errorMessage}</p>\n//           </div>\n//         </Modal.Body>\n//         <Modal.Footer>\n//           <Button variant=\"danger\" onClick={handleCloseErrorModal}>\n//             Try Again\n//           </Button>\n//         </Modal.Footer>\n//       </Modal>\n//     </>\n//   );\n// };\n// export default Login;\nimport React,{useState,useEffect}from\"react\";import{Link,useNavigate}from\"react-router-dom\";import{Footer,Navbar}from\"../components\";import axios from\"axios\";import{Modal,Button}from\"react-bootstrap\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Login=function Login(){var _useState=useState({email:\"\",password:\"\"}),_useState2=_slicedToArray(_useState,2),formData=_useState2[0],setFormData=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],setLoading=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),showSuccessModal=_useState8[0],setShowSuccessModal=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),showErrorModal=_useState10[0],setShowErrorModal=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),errorMessage=_useState12[0],setErrorMessage=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),isLoggedIn=_useState14[0],setIsLoggedIn=_useState14[1];var _useState15=useState(\"\"),_useState16=_slicedToArray(_useState15,2),userName=_useState16[0],setUserName=_useState16[1];var navigate=useNavigate();var email=formData.email,password=formData.password;// Check if user is already logged in\nuseEffect(function(){var token=localStorage.getItem(\"token\");var user=JSON.parse(localStorage.getItem(\"user\")||\"{}\");if(token&&user){setIsLoggedIn(true);setUserName(user.name||user.username||user.email||\"User\");// Check if there's a redirectAfterLogin path and handle it\nvar redirectPath=sessionStorage.getItem('redirectAfterLogin');if(redirectPath){setTimeout(function(){sessionStorage.removeItem('redirectAfterLogin');navigate(redirectPath);},500);// Short delay to ensure state is set\n}}},[navigate]);var handleLogout=function handleLogout(){localStorage.removeItem(\"token\");localStorage.removeItem(\"user\");setIsLoggedIn(false);setUserName(\"\");// Show a quick logout message\nsetError(\"You have been logged out successfully.\");setTimeout(function(){return setError(\"\");},3000);};var onChange=function onChange(e){return setFormData(_objectSpread(_objectSpread({},formData),{},_defineProperty({},e.target.name,e.target.value)));};// Close modals\nvar handleCloseSuccessModal=function handleCloseSuccessModal(){setShowSuccessModal(false);// Check if there's a stored redirect path\nvar redirectPath=sessionStorage.getItem('redirectAfterLogin');if(redirectPath){sessionStorage.removeItem('redirectAfterLogin');navigate(redirectPath);}else{navigate(\"/\");}};var handleCloseErrorModal=function handleCloseErrorModal(){setShowErrorModal(false);};var onSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var config,body,apiUrl,res,_err$response,_err$response$data,message;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();setError(\"\");setLoading(true);_context.prev=3;config={headers:{\"Content-Type\":\"application/json\"}};body=JSON.stringify({email:email,password:password});// const apiUrl = process.env.REACT_APP_API_URL || \"http://localhost:5000\";\napiUrl=process.env.REACT_APP_API_URL||\"https://e-com-fpj2.onrender.com\";_context.next=9;return axios.post(\"\".concat(apiUrl,\"/api/login\"),body,config);case 9:res=_context.sent;// Save token and user to localStorage\nlocalStorage.setItem(\"token\",res.data.token);localStorage.setItem(\"user\",JSON.stringify(res.data.user));setLoading(false);setIsLoggedIn(true);setUserName(res.data.user.name||res.data.user.username||res.data.user.email||\"User\");// Show success modal instead of immediate redirect\nsetShowSuccessModal(true);_context.next=25;break;case 18:_context.prev=18;_context.t0=_context[\"catch\"](3);message=((_err$response=_context.t0.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||\"Login failed. Please check your credentials.\";setError(message);setErrorMessage(message);setShowErrorModal(true);setLoading(false);case 25:case\"end\":return _context.stop();}},_callee,null,[[3,18]]);}));return function onSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"container my-3 py-3\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-center\",children:\"Login\"}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"row my-4 h-100\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6 col-lg-4 col-sm-8 mx-auto\",children:[error&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger\",children:error}),isLoggedIn?/*#__PURE__*/_jsx(\"div\",{className:\"card p-4 text-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-person-circle text-primary\",style:{fontSize:\"3rem\"}}),/*#__PURE__*/_jsxs(\"h3\",{className:\"my-3\",children:[\"Welcome back, \",userName,\"!\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"mb-4\",children:\"You are already logged in.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-center gap-3\",children:[/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:function onClick(){// Check if there's a redirectAfterLogin path\nvar redirectPath=sessionStorage.getItem('redirectAfterLogin');if(redirectPath){sessionStorage.removeItem('redirectAfterLogin');navigate(redirectPath);}else{navigate(\"/\");}},children:sessionStorage.getItem('redirectAfterLogin')?'Continue to Checkout':'Go to Homepage'}),/*#__PURE__*/_jsx(Button,{variant:\"outline-danger\",onClick:handleLogout,children:\"Logout\"})]})]})}):/*#__PURE__*/_jsxs(\"form\",{onSubmit:onSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"my-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Email address\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"form-control\",id:\"email\",name:\"email\",value:email,onChange:onChange,placeholder:\"name@example.com\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"my-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",id:\"password\",name:\"password\",value:password,onChange:onChange,placeholder:\"Password\",required:true})]}),/*#__PURE__*/_jsx(\"div\",{className:\"my-3\",children:/*#__PURE__*/_jsxs(\"p\",{children:[\"New Here? \",/*#__PURE__*/_jsx(Link,{to:\"/register\",className:\"text-decoration-underline text-info\",children:\"Register\"}),\" \"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center\",children:/*#__PURE__*/_jsx(\"button\",{className:\"my-2 mx-auto btn btn-dark\",type:\"submit\",disabled:loading,children:loading?\"Logging in...\":\"Login\"})})]})]})})]}),/*#__PURE__*/_jsx(Footer,{}),/*#__PURE__*/_jsxs(Modal,{show:showSuccessModal,onHide:handleCloseSuccessModal,centered:true,children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,className:\"bg-success text-white\",children:/*#__PURE__*/_jsx(Modal.Title,{children:\"Login Successful\"})}),/*#__PURE__*/_jsx(Modal.Body,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-check-circle-fill text-success\",style:{fontSize:\"3rem\"}}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-3\",children:\"You have successfully logged in!\"}),sessionStorage.getItem('redirectAfterLogin')&&/*#__PURE__*/_jsx(\"p\",{children:\"You will be redirected to checkout.\"})]})}),/*#__PURE__*/_jsx(Modal.Footer,{children:/*#__PURE__*/_jsx(Button,{variant:\"success\",onClick:handleCloseSuccessModal,children:sessionStorage.getItem('redirectAfterLogin')?'Continue to Checkout':'Continue'})})]}),/*#__PURE__*/_jsxs(Modal,{show:showErrorModal,onHide:handleCloseErrorModal,centered:true,children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,className:\"bg-danger text-white\",children:/*#__PURE__*/_jsx(Modal.Title,{children:\"Login Failed\"})}),/*#__PURE__*/_jsx(Modal.Body,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-exclamation-circle-fill text-danger\",style:{fontSize:\"3rem\"}}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-3\",children:errorMessage})]})}),/*#__PURE__*/_jsx(Modal.Footer,{children:/*#__PURE__*/_jsx(Button,{variant:\"danger\",onClick:handleCloseErrorModal,children:\"Try Again\"})})]})]});};export default Login;","map":{"version":3,"names":["React","useState","useEffect","Link","useNavigate","Footer","Navbar","axios","Modal","Button","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Login","_useState","email","password","_useState2","_slicedToArray","formData","setFormData","_useState3","_useState4","error","setError","_useState5","_useState6","loading","setLoading","_useState7","_useState8","showSuccessModal","setShowSuccessModal","_useState9","_useState10","showErrorModal","setShowErrorModal","_useState11","_useState12","errorMessage","setErrorMessage","_useState13","_useState14","isLoggedIn","setIsLoggedIn","_useState15","_useState16","userName","setUserName","navigate","token","localStorage","getItem","user","JSON","parse","name","username","redirectPath","sessionStorage","setTimeout","removeItem","handleLogout","onChange","e","_objectSpread","_defineProperty","target","value","handleCloseSuccessModal","handleCloseErrorModal","onSubmit","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","config","body","apiUrl","res","_err$response","_err$response$data","message","wrap","_callee$","_context","prev","next","preventDefault","headers","stringify","process","env","REACT_APP_API_URL","post","concat","sent","setItem","data","t0","response","stop","_x","apply","arguments","children","className","style","fontSize","variant","onClick","htmlFor","type","id","placeholder","required","to","disabled","show","onHide","centered","Header","closeButton","Title","Body"],"sources":["Y:/MY/Certificate/E-COM/E_Commerce/src/pages/Login.jsx"],"sourcesContent":["// import React, { useState, useEffect } from \"react\";\n// import { Link, useNavigate } from \"react-router-dom\";\n// import { Footer, Navbar } from \"../components\";\n// import axios from \"axios\";\n// import { Modal, Button } from \"react-bootstrap\";\n\n// const Login = () => {\n//   const [formData, setFormData] = useState({\n//     email: \"\",\n//     password: \"\"\n//   });\n//   const [error, setError] = useState(\"\");\n//   const [loading, setLoading] = useState(false);\n//   const [showSuccessModal, setShowSuccessModal] = useState(false);\n//   const [showErrorModal, setShowErrorModal] = useState(false);\n//   const [errorMessage, setErrorMessage] = useState(\"\");\n//   const [isLoggedIn, setIsLoggedIn] = useState(false);\n//   const [userName, setUserName] = useState(\"\");\n//   const navigate = useNavigate();\n\n//   const { email, password } = formData;\n\n//   // Check if user is already logged in\n//   useEffect(() => {\n//     const token = localStorage.getItem(\"token\");\n//     const user = JSON.parse(localStorage.getItem(\"user\") || \"{}\");\n    \n//     if (token && user) {\n//       setIsLoggedIn(true);\n//       setUserName(user.name || user.username || user.email || \"User\");\n//     }\n//   }, []);\n\n//   const handleLogout = () => {\n//     localStorage.removeItem(\"token\");\n//     localStorage.removeItem(\"user\");\n//     setIsLoggedIn(false);\n//     setUserName(\"\");\n//     // Show a quick logout message\n//     setError(\"You have been logged out successfully.\");\n//     setTimeout(() => setError(\"\"), 3000);\n//   };\n\n//   const onChange = e => setFormData({ ...formData, [e.target.name]: e.target.value });\n\n//   // Close modals\n//   const handleCloseSuccessModal = () => {\n//     setShowSuccessModal(false);\n//     navigate(\"/\");\n//   };\n\n//   const handleCloseErrorModal = () => {\n//     setShowErrorModal(false);\n//   };\n\n//   const onSubmit = async e => {\n//     e.preventDefault();\n//     setError(\"\");\n//     setLoading(true);\n\n//     try {\n//       const config = {\n//         headers: {\n//           \"Content-Type\": \"application/json\"\n//         }\n//       };\n\n//       const body = JSON.stringify({ email, password });\n//       const apiUrl = process.env.REACT_APP_API_URL || \"http://localhost:5000\";\n\n//       const res = await axios.post(`${apiUrl}/api/login`, body, config);\n\n//       // Save token and user to localStorage\n//       localStorage.setItem(\"token\", res.data.token);\n//       localStorage.setItem(\"user\", JSON.stringify(res.data.user));\n\n//       setLoading(false);\n      \n//       // Show success modal instead of immediate redirect\n//       setShowSuccessModal(true);\n      \n//       // Optional: Auto-redirect after success modal display (3 seconds)\n//       // setTimeout(() => {\n//       //   setShowSuccessModal(false);\n//       //   navigate(\"/\");\n//       // }, 3000);\n      \n//     } catch (err) {\n//       const message = err.response?.data?.message || \"Login failed. Please check your credentials.\";\n//       setError(message);\n//       setErrorMessage(message);\n//       setShowErrorModal(true);\n//       setLoading(false);\n//     }\n//   };\n\n//   return (\n//     <>\n//       <Navbar />\n//       <div className=\"container my-3 py-3\">\n//         <h1 className=\"text-center\">Login</h1>\n//         <hr />\n//         <div className=\"row my-4 h-100\">\n//           <div className=\"col-md-6 col-lg-4 col-sm-8 mx-auto\">\n//             {error && <div className=\"alert alert-danger\">{error}</div>}\n            \n//             {isLoggedIn ? (\n//               <div className=\"card p-4 text-center\">\n//                 <div className=\"card-body\">\n//                   <i className=\"bi bi-person-circle text-primary\" style={{ fontSize: \"3rem\" }}></i>\n//                   <h3 className=\"my-3\">Welcome back, {userName}!</h3>\n//                   <p className=\"mb-4\">You are already logged in.</p>\n//                   <div className=\"d-flex justify-content-center gap-3\">\n//                     <Button variant=\"primary\" onClick={() => navigate(\"/\")}>\n//                       Go to Homepage\n//                     </Button>\n//                     <Button variant=\"outline-danger\" onClick={handleLogout}>\n//                       Logout\n//                     </Button>\n//                   </div>\n//                 </div>\n//               </div>\n//             ) : (\n//               <form onSubmit={onSubmit}>\n//                 <div className=\"my-3\">\n//                   <label htmlFor=\"email\">Email address</label>\n//                   <input\n//                     type=\"email\"\n//                     className=\"form-control\"\n//                     id=\"email\"\n//                     name=\"email\"\n//                     value={email}\n//                     onChange={onChange}\n//                     placeholder=\"name@example.com\"\n//                     required\n//                   />\n//                 </div>\n//                 <div className=\"my-3\">\n//                   <label htmlFor=\"password\">Password</label>\n//                   <input\n//                     type=\"password\"\n//                     className=\"form-control\"\n//                     id=\"password\"\n//                     name=\"password\"\n//                     value={password}\n//                     onChange={onChange}\n//                     placeholder=\"Password\"\n//                     required\n//                   />\n//                 </div>\n//                 <div className=\"my-3\">\n//                   <p>New Here? <Link to=\"/register\" className=\"text-decoration-underline text-info\">Register</Link> </p>\n//                 </div>\n//                 <div className=\"text-center\">\n//                   <button className=\"my-2 mx-auto btn btn-dark\" type=\"submit\" disabled={loading}>\n//                     {loading ? \"Logging in...\" : \"Login\"}\n//                   </button>\n//                 </div>\n//               </form>\n//             )}\n//           </div>\n//         </div>\n//       </div>\n//       <Footer />\n\n//       {/* Success Modal */}\n//       <Modal show={showSuccessModal} onHide={handleCloseSuccessModal} centered>\n//         <Modal.Header closeButton className=\"bg-success text-white\">\n//           <Modal.Title>Login Successful</Modal.Title>\n//         </Modal.Header>\n//         <Modal.Body>\n//           <div className=\"text-center\">\n//             <i className=\"bi bi-check-circle-fill text-success\" style={{ fontSize: \"3rem\" }}></i>\n//             <p className=\"mt-3\">You have successfully logged in!</p>\n//           </div>\n//         </Modal.Body>\n//         <Modal.Footer>\n//           <Button variant=\"success\" onClick={handleCloseSuccessModal}>\n//             Continue\n//           </Button>\n//         </Modal.Footer>\n//       </Modal>\n\n//       {/* Error Modal */}\n//       <Modal show={showErrorModal} onHide={handleCloseErrorModal} centered>\n//         <Modal.Header closeButton className=\"bg-danger text-white\">\n//           <Modal.Title>Login Failed</Modal.Title>\n//         </Modal.Header>\n//         <Modal.Body>\n//           <div className=\"text-center\">\n//             <i className=\"bi bi-exclamation-circle-fill text-danger\" style={{ fontSize: \"3rem\" }}></i>\n//             <p className=\"mt-3\">{errorMessage}</p>\n//           </div>\n//         </Modal.Body>\n//         <Modal.Footer>\n//           <Button variant=\"danger\" onClick={handleCloseErrorModal}>\n//             Try Again\n//           </Button>\n//         </Modal.Footer>\n//       </Modal>\n//     </>\n//   );\n// };\n\n// export default Login;\n\n\n\nimport React, { useState, useEffect } from \"react\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport { Footer, Navbar } from \"../components\";\nimport axios from \"axios\";\nimport { Modal, Button } from \"react-bootstrap\";\n\nconst Login = () => {\n  const [formData, setFormData] = useState({\n    email: \"\",\n    password: \"\"\n  });\n  const [error, setError] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [showSuccessModal, setShowSuccessModal] = useState(false);\n  const [showErrorModal, setShowErrorModal] = useState(false);\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n  const [userName, setUserName] = useState(\"\");\n  const navigate = useNavigate();\n\n  const { email, password } = formData;\n\n  // Check if user is already logged in\n  useEffect(() => {\n    const token = localStorage.getItem(\"token\");\n    const user = JSON.parse(localStorage.getItem(\"user\") || \"{}\");\n    \n    if (token && user) {\n      setIsLoggedIn(true);\n      setUserName(user.name || user.username || user.email || \"User\");\n      \n      // Check if there's a redirectAfterLogin path and handle it\n      const redirectPath = sessionStorage.getItem('redirectAfterLogin');\n      if (redirectPath) {\n        setTimeout(() => {\n          sessionStorage.removeItem('redirectAfterLogin');\n          navigate(redirectPath);\n        }, 500); // Short delay to ensure state is set\n      }\n    }\n  }, [navigate]);\n\n  const handleLogout = () => {\n    localStorage.removeItem(\"token\");\n    localStorage.removeItem(\"user\");\n    setIsLoggedIn(false);\n    setUserName(\"\");\n    // Show a quick logout message\n    setError(\"You have been logged out successfully.\");\n    setTimeout(() => setError(\"\"), 3000);\n  };\n\n  const onChange = e => setFormData({ ...formData, [e.target.name]: e.target.value });\n\n  // Close modals\n  const handleCloseSuccessModal = () => {\n    setShowSuccessModal(false);\n    \n    // Check if there's a stored redirect path\n    const redirectPath = sessionStorage.getItem('redirectAfterLogin');\n    if (redirectPath) {\n      sessionStorage.removeItem('redirectAfterLogin');\n      navigate(redirectPath);\n    } else {\n      navigate(\"/\");\n    }\n  };\n\n  const handleCloseErrorModal = () => {\n    setShowErrorModal(false);\n  };\n\n  const onSubmit = async e => {\n    e.preventDefault();\n    setError(\"\");\n    setLoading(true);\n\n    try {\n      const config = {\n        headers: {\n          \"Content-Type\": \"application/json\"\n        }\n      };\n\n      const body = JSON.stringify({ email, password });\n      // const apiUrl = process.env.REACT_APP_API_URL || \"http://localhost:5000\";\n      const apiUrl = process.env.REACT_APP_API_URL || \"https://e-com-fpj2.onrender.com\";\n\n      const res = await axios.post(`${apiUrl}/api/login`, body, config);\n\n      // Save token and user to localStorage\n      localStorage.setItem(\"token\", res.data.token);\n      localStorage.setItem(\"user\", JSON.stringify(res.data.user));\n\n      setLoading(false);\n      setIsLoggedIn(true);\n      setUserName(res.data.user.name || res.data.user.username || res.data.user.email || \"User\");\n      \n      // Show success modal instead of immediate redirect\n      setShowSuccessModal(true);\n      \n    } catch (err) {\n      const message = err.response?.data?.message || \"Login failed. Please check your credentials.\";\n      setError(message);\n      setErrorMessage(message);\n      setShowErrorModal(true);\n      setLoading(false);\n    }\n  };\n\n  return (\n    <>\n      <Navbar />\n      <div className=\"container my-3 py-3\">\n        <h1 className=\"text-center\">Login</h1>\n        <hr />\n        <div className=\"row my-4 h-100\">\n          <div className=\"col-md-6 col-lg-4 col-sm-8 mx-auto\">\n            {error && <div className=\"alert alert-danger\">{error}</div>}\n            \n            {isLoggedIn ? (\n              <div className=\"card p-4 text-center\">\n                <div className=\"card-body\">\n                  <i className=\"bi bi-person-circle text-primary\" style={{ fontSize: \"3rem\" }}></i>\n                  <h3 className=\"my-3\">Welcome back, {userName}!</h3>\n                  <p className=\"mb-4\">You are already logged in.</p>\n                  <div className=\"d-flex justify-content-center gap-3\">\n                    <Button variant=\"primary\" onClick={() => {\n                      // Check if there's a redirectAfterLogin path\n                      const redirectPath = sessionStorage.getItem('redirectAfterLogin');\n                      if (redirectPath) {\n                        sessionStorage.removeItem('redirectAfterLogin');\n                        navigate(redirectPath);\n                      } else {\n                        navigate(\"/\");\n                      }\n                    }}>\n                      {sessionStorage.getItem('redirectAfterLogin') ? 'Continue to Checkout' : 'Go to Homepage'}\n                    </Button>\n                    <Button variant=\"outline-danger\" onClick={handleLogout}>\n                      Logout\n                    </Button>\n                  </div>\n                </div>\n              </div>\n            ) : (\n              <form onSubmit={onSubmit}>\n                <div className=\"my-3\">\n                  <label htmlFor=\"email\">Email address</label>\n                  <input\n                    type=\"email\"\n                    className=\"form-control\"\n                    id=\"email\"\n                    name=\"email\"\n                    value={email}\n                    onChange={onChange}\n                    placeholder=\"name@example.com\"\n                    required\n                  />\n                </div>\n                <div className=\"my-3\">\n                  <label htmlFor=\"password\">Password</label>\n                  <input\n                    type=\"password\"\n                    className=\"form-control\"\n                    id=\"password\"\n                    name=\"password\"\n                    value={password}\n                    onChange={onChange}\n                    placeholder=\"Password\"\n                    required\n                  />\n                </div>\n                <div className=\"my-3\">\n                  <p>New Here? <Link to=\"/register\" className=\"text-decoration-underline text-info\">Register</Link> </p>\n                </div>\n                <div className=\"text-center\">\n                  <button className=\"my-2 mx-auto btn btn-dark\" type=\"submit\" disabled={loading}>\n                    {loading ? \"Logging in...\" : \"Login\"}\n                  </button>\n                </div>\n              </form>\n            )}\n          </div>\n        </div>\n      </div>\n      <Footer />\n\n      {/* Success Modal */}\n      <Modal show={showSuccessModal} onHide={handleCloseSuccessModal} centered>\n        <Modal.Header closeButton className=\"bg-success text-white\">\n          <Modal.Title>Login Successful</Modal.Title>\n        </Modal.Header>\n        <Modal.Body>\n          <div className=\"text-center\">\n            <i className=\"bi bi-check-circle-fill text-success\" style={{ fontSize: \"3rem\" }}></i>\n            <p className=\"mt-3\">You have successfully logged in!</p>\n            {sessionStorage.getItem('redirectAfterLogin') && (\n              <p>You will be redirected to checkout.</p>\n            )}\n          </div>\n        </Modal.Body>\n        <Modal.Footer>\n          <Button variant=\"success\" onClick={handleCloseSuccessModal}>\n            {sessionStorage.getItem('redirectAfterLogin') ? 'Continue to Checkout' : 'Continue'}\n          </Button>\n        </Modal.Footer>\n      </Modal>\n\n      {/* Error Modal */}\n      <Modal show={showErrorModal} onHide={handleCloseErrorModal} centered>\n        <Modal.Header closeButton className=\"bg-danger text-white\">\n          <Modal.Title>Login Failed</Modal.Title>\n        </Modal.Header>\n        <Modal.Body>\n          <div className=\"text-center\">\n            <i className=\"bi bi-exclamation-circle-fill text-danger\" style={{ fontSize: \"3rem\" }}></i>\n            <p className=\"mt-3\">{errorMessage}</p>\n          </div>\n        </Modal.Body>\n        <Modal.Footer>\n          <Button variant=\"danger\" onClick={handleCloseErrorModal}>\n            Try Again\n          </Button>\n        </Modal.Footer>\n      </Modal>\n    </>\n  );\n};\n\nexport default Login;"],"mappings":"ymBAAA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AAEA;AACA;AACA;AAEA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAIA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,IAAI,CAAEC,WAAW,KAAQ,kBAAkB,CACpD,OAASC,MAAM,CAAEC,MAAM,KAAQ,eAAe,CAC9C,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,OAASC,KAAK,CAAEC,MAAM,KAAQ,iBAAiB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,gCAAAC,QAAA,IAAAC,SAAA,yBAEhD,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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}